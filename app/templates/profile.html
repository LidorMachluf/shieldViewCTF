{% extends "base.html" %}

{% block title %}Profile â€” ShieldView SOC{% endblock %}

{% block content %}
<div class="page-header">
    <h1>User Profile</h1>
</div>

<div class="page-content">
    {% if profile_flag %}
    <div class="flag-banner">
        <span class="flag-label">Security Clearance Code</span>
        {{ profile_flag }}
    </div>
    {% endif %}

    <div class="card profile-card mb-4">
        <div class="profile-header">
            <div class="profile-avatar">
                {{ profile_user.display_name[0] if profile_user.display_name else '?' }}
            </div>
            <div class="profile-info">
                <h2>{{ profile_user.display_name }}</h2>
                <div class="profile-role">
                    <span class="badge badge-{{ 'admin' if profile_user.role == 'admin' else 'user' }}">{{ profile_user.role }}</span>
                </div>
            </div>
        </div>

        <div class="profile-fields">
            <div class="profile-field">
                <div class="field-label">Email</div>
                <div class="field-value">{{ profile_user.email }}</div>
            </div>
            <div class="profile-field">
                <div class="field-label">Role</div>
                <div class="field-value" style="text-transform: capitalize;">{{ profile_user.role }}</div>
            </div>
            <div class="profile-field">
                <div class="field-label">Last Login</div>
                <div class="field-value mono">{{ profile_user.last_login or 'Never' }}</div>
            </div>
            <div class="profile-field">
                <div class="field-label">Account Created</div>
                <div class="field-value mono">{{ profile_user.created_at }}</div>
            </div>
            <div class="profile-field">
                <div class="field-label">User ID</div>
                <div class="field-value mono">#{{ profile_user.id }}</div>
            </div>
        </div>
    </div>

    {% if is_own_profile %}
    <div class="card profile-card">
        <h3 style="font-size: 15px; font-weight: 700; margin-bottom: 18px;">Edit Display Name</h3>
        <form method="POST" action="{{ url_for('profile.profile') }}">
            <div class="form-group">
                <label for="display_name">Display Name</label>
                <input type="text" id="display_name" name="display_name" class="form-input" value="{{ profile_user.display_name }}" maxlength="100" required style="max-width: 400px;">
            </div>
            <button type="submit" class="btn btn-primary">Save Changes</button>
        </form>
    </div>
    {% endif %}
</div>
{% endblock %}
